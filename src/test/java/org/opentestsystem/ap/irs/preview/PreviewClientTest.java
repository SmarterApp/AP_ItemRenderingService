package org.opentestsystem.ap.irs.preview;

import org.junit.Test;
import org.opentestsystem.ap.irs.TestHelper;

import java.util.Arrays;
import java.util.List;

import static org.assertj.core.api.Assertions.assertThat;
import static org.opentestsystem.ap.irs.TestHelper.BANK_KEY;

public class PreviewClientTest {

    private static final TestHelper testUtil = new TestHelper();

    private final List<String> itemIds = Arrays.asList("100001", "200002");

    @Test
    public void testGenerateRenderUrl() {
        final PreviewClient client = new PreviewClient(testUtil.newItemBankProperties());
        final String url = client.getRenderUrl(BANK_KEY, BANK_KEY, itemIds);
        assertThat(url).isEqualTo("http://localhost:8200/items?ids=200-100001,200-200002&loadFrom=/home/tomcat7/content/200");
    }

    @Test
    public void testGenerateIdString() {
        final PreviewClient client = new PreviewClient(testUtil.newItemBankProperties());
        final String idString = client.generateIdString(BANK_KEY, itemIds);
        assertThat(idString).isEqualTo("200-100001,200-200002");
    }
}
