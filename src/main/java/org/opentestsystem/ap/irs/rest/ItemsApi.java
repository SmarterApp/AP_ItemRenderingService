package org.opentestsystem.ap.irs.rest;

import org.opentestsystem.ap.irs.model.HtmlRenderingServiceResponse;
import org.opentestsystem.ap.irs.service.HtmlRenderingService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

/**
 * Created by alexponce on 4/5/17.
 */
@RestController
@RequestMapping("${api.context-path}/items")
public class ItemsApi {

    @Autowired
    private HtmlRenderingService htmlRenderingService;

    @GetMapping("/{itemId}")
    public HtmlRenderingServiceResponse getItem(@PathVariable String itemId) {

//        1. Item Rendering Service clones item from item bank to IRIS filesystem
//        2. Item Rendering Service issues rendering request for item to IRIS
//        3. IRIS responds with rendered item data
//        4. Item Rendering Service responds to caller with rendered item data packaged in JSON

        return htmlRenderingService.getItemContent(itemId);
        //return htmlRenderingService.getMockItemContents(itemId);
        //return htmlRenderingService.getIvsItemContent(itemId);
    }
}
